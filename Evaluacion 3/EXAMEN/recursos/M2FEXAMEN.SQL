-- ****************** TABLAS UNIDAD VIII ************
-- ****************** EXAMEN.SQL ************


-- *************************************************************
--   ****** TABLAS CLIENTES, PEDIDOS, PRODUCTOS
-- ******************************************************

-- ## TABLA CLIENTES

CREATE TABLE CLIENTES
(CLIENTE_NO		INTEGER(4),
 NOMBRE 		VARCHAR(25),
 LOCALIDAD         	VARCHAR(14),
 VENDEDOR_NO       	INTEGER(4),
 DEBE			INTEGER(9),
 HABER			INTEGER(9),
 LIMITE_CREDITO    	INTEGER(9),
 CONSTRAINT PK_CLIENTE_NO PRIMARY KEY(CLIENTE_NO)
);

-- ## TABLA PRODUCTOS

CREATE TABLE PRODUCTOS
(PRODUCTO_NO  		INTEGER(4),
 DESCRIPCION  		VARCHAR(30),
 PRECIO_ACTUAL 		INTEGER(8),
 STOCK_DISPONIBLE	INTEGER(9),
CONSTRAINT PK_PRODUCTO_NO PRIMARY KEY (PRODUCTO_NO) 
);

-- ## TABLA PEDIDOS

CREATE TABLE PEDIDOS
(PEDIDO_NO         	INTEGER(4),
 PRODUCTO_NO		INTEGER(4),
 CLIENTE_NO 		INTEGER(4),
 UNIDADES 	        INTEGER(4),
 FECHA_PEDIDO      	DATE,
CONSTRAINT PK_PEDIDO_NO PRIMARY KEY (PEDIDO_NO),
CONSTRAINT FK_PEDIDOS_PRODUCTO_NO FOREIGN KEY (PRODUCTO_NO)
		REFERENCES PRODUCTOS(PRODUCTO_NO) ON DELETE CASCADE,
CONSTRAINT FK_PEDIDOS_CLIENTE_NO FOREIGN KEY (CLIENTE_NO)
		REFERENCES CLIENTES(CLIENTE_NO) ON DELETE CASCADE 
);

CREATE TABLE HISTORIA_PEDIDOS
(N_PED         	INTEGER(4),
 N_CLI		INTEGER(4),
 A_PAGAR 		INTEGER(4),
CONSTRAINT PK_HISTORIA_PEDIDOS PRIMARY KEY (N_PED),
CONSTRAINT FK_HISTORIA_PEDIDOS_CLIENTE_NO FOREIGN KEY (N_CLI)
		REFERENCES CLIENTES(CLIENTE_NO) ON DELETE CASCADE 
);

-- ## CLIENTES
INSERT INTO CLIENTES VALUES (101, 'DISTRIBUCIONES GOMEZ', 'MADRID', 7499, 0,0,3000);
INSERT INTO CLIENTES VALUES (102, 'LOGITRONICA S.L', 'BARCELONA', 7654,0,0,3000);
INSERT INTO CLIENTES VALUES (103, 'INDUSTRIAS LACTEAS S.A.', 'LAS ROZAS', 7844,0,0, 6000);
INSERT INTO CLIENTES VALUES (104, 'TALLERES ESTESO S.A.', 'SEVILLA', 7654, 0, 0, 3000);
INSERT INTO CLIENTES VALUES (105, 'EDICIONES SANZ', 'BARCELONA', 7499, 0,0,3000);
INSERT INTO CLIENTES VALUES (106, 'SIGNOLOGIC S.A.', 'MADRID', 7654,0,0,3000);
INSERT INTO CLIENTES VALUES (107, 'MARTIN Y ASOCIADOS S.L.', 'ARAVACA' , 7844,0,0, 6000);
INSERT INTO CLIENTES VALUES (108, 'MANUFACTURAS ALI S.A.', 'SEVILLA', 7654, 0, 0, 3000);

-- ## PRODUCTOS
INSERT INTO PRODUCTOS VALUES(10,'MESA DESPACHO MOD. GAVIOTA', 550, 50);
INSERT INTO PRODUCTOS VALUES (20, 'SILLA DIRECTOR MOD. BUFALO', 670, 25);
INSERT INTO PRODUCTOS VALUES (30, 'ARMARIO NOGAL DOS PUERTAS', 460, 20);
INSERT INTO PRODUCTOS VALUES (40, 'MESA MODELO UNIÃ“N',340, 15);
INSERT INTO PRODUCTOS VALUES (50, 'ARCHIVADOR CEREZO',1050, 20);
INSERT INTO PRODUCTOS VALUES (60, 'CAJA SEGURIDAD MOD B222', 280, 15);
INSERT INTO PRODUCTOS VALUES (70, 'DESTRUCTORA DE PAPEL A3',450, 25);
INSERT INTO PRODUCTOS VALUES (80, 'MODULO ORDENADOR MOD. ERGOS', 550, 25);

-- ## PEDIDOS
INSERT INTO PEDIDOS VALUES(1000, 20, 103, 3, '2005-10-06');
INSERT INTO PEDIDOS VALUES(1001, 50, 106, 2, '2005-10-06');
INSERT INTO PEDIDOS VALUES(1002, 10, 101, 4, '2005-10-07');
INSERT INTO PEDIDOS VALUES(1003, 20, 105, 4, '2005-10-16');
INSERT INTO PEDIDOS VALUES(1004, 40, 106, 8, '2005-10-20');
INSERT INTO PEDIDOS VALUES(1005, 30, 105, 2, '2005-10-20');
INSERT INTO PEDIDOS VALUES(1006, 70, 103, 3, '2005-11-03');
INSERT INTO PEDIDOS VALUES(1007, 50, 101, 2, '2005-11-06');
INSERT INTO PEDIDOS VALUES(1008, 10, 106, 6, '2005-11-16');
INSERT INTO PEDIDOS VALUES(1009, 20, 105, 2, '2005-11-26');
INSERT INTO PEDIDOS VALUES(1010, 40, 102, 3, '2005-12-08');
INSERT INTO PEDIDOS VALUES(1011, 30, 106, 2, '2005-12-15');
INSERT INTO PEDIDOS VALUES(1012, 10, 105, 3, '2005-12-06');
INSERT INTO PEDIDOS VALUES(1013, 30, 106, 2, '2005-12-06');
INSERT INTO PEDIDOS VALUES(1014, 20, 101, 4, '2000-01-07');
INSERT INTO PEDIDOS VALUES(1015, 70, 105, 4, '2000-01-16');
INSERT INTO PEDIDOS VALUES(1016, 30, 106, 7, '2000-01-18');
INSERT INTO PEDIDOS VALUES(1017, 20, 105, 6, '2000-01-20');


COMMIT;
-- ****************** FIN ************

